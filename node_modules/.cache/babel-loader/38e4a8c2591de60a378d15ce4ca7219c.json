{"ast":null,"code":"var _jsxFileName = \"/Users/tszhofong/project/FYP-FE/src/context/UserContext.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nimport React from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar UserStateContext = /*#__PURE__*/React.createContext();\nvar UserDispatchContext = /*#__PURE__*/React.createContext();\n\nfunction userReducer(state, action) {\n  switch (action.type) {\n    case \"LOGIN_SUCCESS\":\n      return { ...state,\n        isAuthenticated: true\n      };\n\n    case \"SIGN_OUT_SUCCESS\":\n      return { ...state,\n        isAuthenticated: false\n      };\n\n    default:\n      {\n        throw new Error(`Unhandled action type: ${action.type}`);\n      }\n  }\n}\n\nfunction UserProvider(_ref) {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  var [state, dispatch] = React.useReducer(userReducer, {\n    isAuthenticated: !!localStorage.getItem(\"account\")\n  });\n  return /*#__PURE__*/_jsxDEV(UserStateContext.Provider, {\n    value: state,\n    children: /*#__PURE__*/_jsxDEV(UserDispatchContext.Provider, {\n      value: dispatch,\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 24,\n    columnNumber: 5\n  }, this);\n}\n\n_s(UserProvider, \"HJlHjiNFfQVE62+pSutM6/u19pM=\");\n\n_c = UserProvider;\n\nfunction useUserState() {\n  _s2();\n\n  var context = React.useContext(UserStateContext);\n\n  if (context === undefined) {\n    throw new Error(\"useUserState must be used within a UserProvider\");\n  }\n\n  return context;\n}\n\n_s2(useUserState, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n\nfunction useUserDispatch() {\n  _s3();\n\n  var context = React.useContext(UserDispatchContext);\n\n  if (context === undefined) {\n    throw new Error(\"useUserDispatch must be used within a UserProvider\");\n  }\n\n  return context;\n}\n\n_s3(useUserDispatch, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n\nexport { UserProvider, useUserState, useUserDispatch, loginUser, loginPhyUser, signOut }; // ###########################################################\n\nfunction loginUser(dispatch, login, password, history, setIsLoading, setError) {\n  setError(false);\n  setIsLoading(true);\n\n  if (!!login && !!password) {\n    const requestOptions = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        login: login,\n        password: password\n      })\n    };\n    fetch('http://localhost:3001/login', requestOptions).then(response => response.json()).then(data => {\n      if (data.status === 200) {\n        localStorage.setItem(\"id\", data.data.id);\n        localStorage.setItem(\"account\", data.data.account);\n        localStorage.setItem(\"displayName\", data.data.displayName);\n        setError(null);\n        setIsLoading(false);\n        dispatch({\n          type: 'LOGIN_SUCCESS'\n        });\n        history.push('/app/appointment');\n      } else {\n        setError(true);\n        setIsLoading(false);\n      }\n    });\n  } else {\n    setError(true);\n    setIsLoading(false);\n  }\n}\n\nfunction loginPhyUser(dispatch, login, password, history, setIsLoading, setError) {\n  setError(false);\n  setIsLoading(true);\n\n  if (!!login && !!password) {\n    const requestOptions = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        login: login,\n        password: password\n      })\n    };\n    fetch('http://localhost:3001/phyLogin', requestOptions).then(response => response.json()).then(data => {\n      if (data.status === 200) {\n        localStorage.setItem(\"id\", data.data.id);\n        localStorage.setItem(\"account\", data.data.account);\n        localStorage.setItem(\"displayName\", data.data.displayName);\n        localStorage.setItem(\"type\", 'physiotherapists');\n        setError(null);\n        setIsLoading(false);\n        dispatch({\n          type: 'LOGIN_SUCCESS'\n        });\n        history.push('/app/appointment');\n      } else {\n        setError(true);\n        setIsLoading(false);\n      }\n    });\n  } else {\n    setError(true);\n    setIsLoading(false);\n  }\n}\n\nfunction signOut(dispatch, history) {\n  localStorage.removeItem(\"account\");\n  localStorage.removeItem(\"displayName\");\n  localStorage.removeItem(\"type\");\n  dispatch({\n    type: \"SIGN_OUT_SUCCESS\"\n  });\n  history.push(\"/login\");\n}\n\nvar _c;\n\n$RefreshReg$(_c, \"UserProvider\");","map":{"version":3,"sources":["/Users/tszhofong/project/FYP-FE/src/context/UserContext.js"],"names":["React","UserStateContext","createContext","UserDispatchContext","userReducer","state","action","type","isAuthenticated","Error","UserProvider","children","dispatch","useReducer","localStorage","getItem","useUserState","context","useContext","undefined","useUserDispatch","loginUser","loginPhyUser","signOut","login","password","history","setIsLoading","setError","requestOptions","method","headers","body","JSON","stringify","fetch","then","response","json","data","status","setItem","id","account","displayName","push","removeItem"],"mappings":"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","sourcesContent":["import React from \"react\";\n\nvar UserStateContext = React.createContext();\nvar UserDispatchContext = React.createContext();\n\nfunction userReducer(state, action) {\n  switch (action.type) {\n    case \"LOGIN_SUCCESS\":\n      return { ...state, isAuthenticated: true };\n    case \"SIGN_OUT_SUCCESS\":\n      return { ...state, isAuthenticated: false };\n    default: {\n      throw new Error(`Unhandled action type: ${action.type}`);\n    }\n  }\n}\n\nfunction UserProvider({ children }) {\n  var [state, dispatch] = React.useReducer(userReducer, {\n    isAuthenticated: !!localStorage.getItem(\"account\"),\n  });\n\n  return (\n    <UserStateContext.Provider value={state}>\n      <UserDispatchContext.Provider value={dispatch}>\n        {children}\n      </UserDispatchContext.Provider>\n    </UserStateContext.Provider>\n  );\n}\n\nfunction useUserState() {\n  var context = React.useContext(UserStateContext);\n  if (context === undefined) {\n    throw new Error(\"useUserState must be used within a UserProvider\");\n  }\n  return context;\n}\n\nfunction useUserDispatch() {\n  var context = React.useContext(UserDispatchContext);\n  if (context === undefined) {\n    throw new Error(\"useUserDispatch must be used within a UserProvider\");\n  }\n  return context;\n}\n\nexport { UserProvider, useUserState, useUserDispatch, loginUser, loginPhyUser, signOut };\n\n// ###########################################################\n\nfunction loginUser(dispatch, login, password, history, setIsLoading, setError) {\n  setError(false);\n  setIsLoading(true);\n\n  if (!!login && !!password) {\n    const requestOptions = {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ login: login, password: password })\n    };\n    fetch('http://localhost:3001/login', requestOptions)\n      .then(response => response.json())\n      .then(data => {\n        if(data.status === 200){\n          localStorage.setItem(\"id\", data.data.id);\n          localStorage.setItem(\"account\", data.data.account);\n          localStorage.setItem(\"displayName\", data.data.displayName);\n\n          setError(null)\n          setIsLoading(false)\n          dispatch({ type: 'LOGIN_SUCCESS' })\n          history.push('/app/appointment')\n        }\n        else{\n          setError(true);\n          setIsLoading(false);\n        }\n      });\n  } else {\n    setError(true);\n    setIsLoading(false);\n  }\n}\n\nfunction loginPhyUser(dispatch, login, password, history, setIsLoading, setError) {\n  setError(false);\n  setIsLoading(true);\n\n  if (!!login && !!password) {\n    const requestOptions = {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ login: login, password: password })\n    };\n    fetch('http://localhost:3001/phyLogin', requestOptions)\n      .then(response => response.json())\n      .then(data => {\n        if(data.status === 200){\n          localStorage.setItem(\"id\", data.data.id);\n          localStorage.setItem(\"account\", data.data.account);\n          localStorage.setItem(\"displayName\", data.data.displayName);\n          localStorage.setItem(\"type\", 'physiotherapists');\n\n          setError(null)\n          setIsLoading(false)\n          dispatch({ type: 'LOGIN_SUCCESS' })\n          history.push('/app/appointment')\n        }\n        else{\n          setError(true);\n          setIsLoading(false);\n        }\n      });\n  } else {\n    setError(true);\n    setIsLoading(false);\n  }\n}\n\nfunction signOut(dispatch, history) {\n  localStorage.removeItem(\"account\");\n  localStorage.removeItem(\"displayName\");\n  localStorage.removeItem(\"type\");\n  dispatch({ type: \"SIGN_OUT_SUCCESS\" });\n  history.push(\"/login\");\n}\n"]},"metadata":{},"sourceType":"module"}