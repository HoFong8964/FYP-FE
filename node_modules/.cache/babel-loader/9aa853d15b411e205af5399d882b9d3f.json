{"ast":null,"code":"var _jsxFileName = \"/Users/tszhofong/project/FYP-FE/src/pages/book/Book.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { Grid, TextField, Select, MenuItem, Box, Button, FormControl, InputLabel, Checkbox } from \"@material-ui/core\";\nimport { Close as CloseIcon } from \"@material-ui/icons\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport SyntaxHighlighter from \"react-syntax-highlighter\";\nimport { docco } from \"react-syntax-highlighter/dist/esm/styles/hljs\";\nimport classnames from \"classnames\";\nimport DatePicker from \"react-date-picker\";\nimport \"react-datetime/css/react-datetime.css\"; // styles\n\nimport \"react-toastify/dist/ReactToastify.css\";\nimport useStyles from \"./styles\"; // components\n\nimport Widget from \"../../components/Widget/Widget\";\nimport PageTitle from \"../../components/PageTitle/PageTitle\";\nimport Notification from \"../../components/Notification\";\nimport { set } from \"date-fns\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst positions = [toast.POSITION.TOP_LEFT, toast.POSITION.TOP_CENTER, toast.POSITION.TOP_RIGHT, toast.POSITION.BOTTOM_LEFT, toast.POSITION.BOTTOM_CENTER, toast.POSITION.BOTTOM_RIGHT];\nexport default function NotificationsPage(props) {\n  _s();\n\n  var classes = useStyles(); // local\n\n  var [phyList, setPhyList] = useState(undefined);\n  var [phyId, setPhyId] = useState('');\n  var [bookDate, setBookDate] = useState(new Date());\n  var [hour, setHour] = useState('');\n  var [minute, setMinute] = useState('');\n  var [remarks, setRemarks] = useState('');\n  var [agreement, setAgreement] = useState(false);\n  var {\n    selectPhyId\n  } = useParams();\n  var hours = ['10', '11', '12', '13', '14', '15', '16', '17', '18'];\n  var minutes = ['00', '30'];\n  var nextDay = new Date();\n  nextDay.setDate(nextDay.getDate() + 1);\n  useEffect(() => {\n    // get phy data\n    const requestOptions = {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    fetch('http://localhost:3001/physiotherapists', requestOptions).then(response => response.json()).then(data => {\n      setPhyList(data.res);\n\n      if (selectPhyId) {\n        console.log(\"selectPhyId: \", selectPhyId);\n        setPhyId(selectPhyId);\n      }\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(PageTitle, {\n      title: \"\\u9810\\u7D04\\u8A3A\\u75C7\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      spacing: 4,\n      children: [/*#__PURE__*/_jsxDEV(ToastContainer, {\n        className: classes.toastsContainer,\n        closeButton: /*#__PURE__*/_jsxDEV(CloseButton, {\n          className: classes.notificationCloseButton\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this),\n        closeOnClick: false,\n        progressClassName: classes.notificationProgress\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        children: /*#__PURE__*/_jsxDEV(Widget, {\n          disableWidgetMenu: true,\n          children: /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            item: true,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: classes.formContainer,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: classes.form,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(TextField, {\n                    id: \"outlined-name\",\n                    label: \"\\u59D3\\u540D\",\n                    value: localStorage.getItem('displayName'),\n                    InputProps: {\n                      readOnly: true\n                    },\n                    variant: \"filled\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 91,\n                    columnNumber: 17\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 90,\n                  columnNumber: 15\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"\\xA0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 101,\n                  columnNumber: 15\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(Box, {\n                    sx: {\n                      minWidth: 120\n                    },\n                    children: /*#__PURE__*/_jsxDEV(FormControl, {\n                      fullWidth: true,\n                      children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                        id: \"demo-simple-select-label\",\n                        children: \"\\u7269\\u7406\\u6CBB\\u7642\\u5E2B\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 105,\n                        columnNumber: 21\n                      }, this), /*#__PURE__*/_jsxDEV(Select, {\n                        labelId: \"demo-simple-select-label\",\n                        id: \"demo-simple-select\",\n                        value: phyId,\n                        label: \"PhyId\",\n                        onChange: e => {\n                          setPhyId(e.target.value);\n                        },\n                        children: (phyList === null || phyList === void 0 ? void 0 : phyList.length) > 0 ? phyList === null || phyList === void 0 ? void 0 : phyList.map((value, index) => {\n                          return /*#__PURE__*/_jsxDEV(MenuItem, {\n                            value: value.id,\n                            children: [value.center, \" - \", value.displayName]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 114,\n                            columnNumber: 32\n                          }, this);\n                        }) : ''\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 106,\n                        columnNumber: 21\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 104,\n                      columnNumber: 19\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 103,\n                    columnNumber: 17\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 102,\n                  columnNumber: 15\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"\\xA0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 120,\n                  columnNumber: 15\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"\\xA0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 121,\n                  columnNumber: 15\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(DatePicker, {\n                    value: bookDate,\n                    onChange: date => {\n                      setBookDate(date);\n                    },\n                    minDate: nextDay\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 123,\n                    columnNumber: 17\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 122,\n                  columnNumber: 15\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"\\xA0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 130,\n                  columnNumber: 15\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(Box, {\n                    sx: {\n                      minWidth: 160\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(FormControl, {\n                      children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                        id: \"demo-simple-select-label\",\n                        children: \"\\u6642\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 134,\n                        columnNumber: 21\n                      }, this), /*#__PURE__*/_jsxDEV(Select, {\n                        labelId: \"demo-simple-select-label\",\n                        id: \"demo-simple-select\",\n                        value: hour,\n                        label: \"Hours\",\n                        onChange: e => {\n                          setHour(e.target.value);\n                        },\n                        children: hours.map((value, index) => {\n                          return /*#__PURE__*/_jsxDEV(MenuItem, {\n                            value: value,\n                            children: value\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 143,\n                            columnNumber: 32\n                          }, this);\n                        })\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 135,\n                        columnNumber: 21\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 133,\n                      columnNumber: 19\n                    }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n                      children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                        id: \"demo-simple-select-label\",\n                        children: \"\\u5206\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 148,\n                        columnNumber: 21\n                      }, this), /*#__PURE__*/_jsxDEV(Select, {\n                        labelId: \"demo-simple-select-label\",\n                        id: \"demo-simple-select\",\n                        value: minute,\n                        label: \"Minutes\",\n                        onChange: e => {\n                          setMinute(e.target.value);\n                        },\n                        children: minutes.map((value, index) => {\n                          return /*#__PURE__*/_jsxDEV(MenuItem, {\n                            value: value,\n                            children: value\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 157,\n                            columnNumber: 32\n                          }, this);\n                        })\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 149,\n                        columnNumber: 21\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 147,\n                      columnNumber: 19\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 132,\n                    columnNumber: 17\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 131,\n                  columnNumber: 15\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"\\xA0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 163,\n                  columnNumber: 15\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(TextField, {\n                    id: \"outlined-name\",\n                    label: \"\\u5099\\u8A3B\",\n                    value: remarks,\n                    onChange: e => {\n                      setRemarks(e.target.value);\n                    },\n                    multiline: true,\n                    maxRows: 4\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 165,\n                    columnNumber: 17\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 164,\n                  columnNumber: 15\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"\\xA0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 174,\n                  columnNumber: 15\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"\\xA0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 175,\n                  columnNumber: 15\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(Checkbox, {\n                    className: classes.checkbox,\n                    checked: agreement,\n                    onChange: e => {\n                      setAgreement(e.target.checked);\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 177,\n                    columnNumber: 17\n                  }, this), \"\\u6211\\u540C\\u610F\\u76F8\\u95DC\\u6A5F\\u69CB\\u53D6\\u95B1\\u6211\\u7684\\u96FB\\u5B50\\u5065\\u5EB7\\u7D00\\u9304\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 176,\n                  columnNumber: 15\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"\\xA0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 184,\n                  columnNumber: 15\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"\\xA0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 185,\n                  columnNumber: 15\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: classes.formButtons,\n                  children: /*#__PURE__*/_jsxDEV(Button, {\n                    onClick: () => confirmBook(),\n                    variant: \"contained\",\n                    color: \"primary\",\n                    size: \"large\",\n                    children: \"\\u78BA\\u5B9A\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 187,\n                    columnNumber: 17\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 186,\n                  columnNumber: 15\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 89,\n                columnNumber: 13\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 11\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n\n  function confirmBook() {\n    var appointmentDate = bookDate.getFullYear() + \"-\" + (bookDate.getMonth() + 1 < 10 ? '0' : '') + (bookDate.getMonth() + 1) + \"-\" + (bookDate.getDate() < 10 ? '0' : '') + bookDate.getDate();\n    var appointmentTime = hour + \":\" + minute;\n\n    if (!agreement) {\n      alert('請同意相關機構取閱你的電子健康紀錄');\n      return false;\n    }\n\n    if (phyId && appointmentDate && appointmentTime) {\n      const requestOptions = {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          patientId: localStorage.getItem('id'),\n          phyId: phyId,\n          appointmentDate: appointmentDate,\n          appointmentTime: appointmentTime,\n          remarks: remarks\n        })\n      };\n      fetch('http://localhost:3001/makeAppointment', requestOptions).then(response => response.json()).then(data => {\n        if (data.status === 200) {\n          window.location.href = '/#/app/appointment';\n        }\n      });\n    }\n  }\n}\n\n_s(NotificationsPage, \"qlgOyCA1ua7dqHn4LdzCVTms1pw=\", false, function () {\n  return [useStyles, useParams];\n});\n\n_c = NotificationsPage;\n\nfunction CloseButton(_ref) {\n  let {\n    closeToast,\n    className\n  } = _ref;\n  return /*#__PURE__*/_jsxDEV(CloseIcon, {\n    className: className,\n    onClick: closeToast\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 241,\n    columnNumber: 10\n  }, this);\n}\n\n_c2 = CloseButton;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"NotificationsPage\");\n$RefreshReg$(_c2, \"CloseButton\");","map":{"version":3,"sources":["/Users/tszhofong/project/FYP-FE/src/pages/book/Book.js"],"names":["React","useState","useEffect","useParams","Grid","TextField","Select","MenuItem","Box","Button","FormControl","InputLabel","Checkbox","Close","CloseIcon","ToastContainer","toast","SyntaxHighlighter","docco","classnames","DatePicker","useStyles","Widget","PageTitle","Notification","set","positions","POSITION","TOP_LEFT","TOP_CENTER","TOP_RIGHT","BOTTOM_LEFT","BOTTOM_CENTER","BOTTOM_RIGHT","NotificationsPage","props","classes","phyList","setPhyList","undefined","phyId","setPhyId","bookDate","setBookDate","Date","hour","setHour","minute","setMinute","remarks","setRemarks","agreement","setAgreement","selectPhyId","hours","minutes","nextDay","setDate","getDate","requestOptions","method","headers","fetch","then","response","json","data","res","console","log","toastsContainer","notificationCloseButton","notificationProgress","formContainer","form","localStorage","getItem","readOnly","minWidth","e","target","value","length","map","index","id","center","displayName","date","checkbox","checked","formButtons","confirmBook","appointmentDate","getFullYear","getMonth","appointmentTime","alert","body","JSON","stringify","patientId","status","window","location","href","CloseButton","closeToast","className"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,SAAT,QAA0B,kBAA1B;AACA,SAASC,IAAT,EAAeC,SAAf,EAA0BC,MAA1B,EAAkCC,QAAlC,EAA4CC,GAA5C,EAAiDC,MAAjD,EAAyDC,WAAzD,EAAsEC,UAAtE,EAAkFC,QAAlF,QAAiG,mBAAjG;AACA,SAASC,KAAK,IAAIC,SAAlB,QAAmC,oBAAnC;AACA,SAASC,cAAT,EAAyBC,KAAzB,QAAsC,gBAAtC;AACA,OAAOC,iBAAP,MAA8B,0BAA9B;AACA,SAASC,KAAT,QAAsB,+CAAtB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,OAAOC,UAAP,MAAuB,mBAAvB;AACA,OAAO,uCAAP,C,CAGA;;AACA,OAAO,uCAAP;AACA,OAAOC,SAAP,MAAsB,UAAtB,C,CAEA;;AACA,OAAOC,MAAP,MAAmB,gCAAnB;AACA,OAAOC,SAAP,MAAsB,sCAAtB;AACA,OAAOC,YAAP,MAAyB,+BAAzB;AACA,SAASC,GAAT,QAAoB,UAApB;;;AAGA,MAAMC,SAAS,GAAG,CAChBV,KAAK,CAACW,QAAN,CAAeC,QADC,EAEhBZ,KAAK,CAACW,QAAN,CAAeE,UAFC,EAGhBb,KAAK,CAACW,QAAN,CAAeG,SAHC,EAIhBd,KAAK,CAACW,QAAN,CAAeI,WAJC,EAKhBf,KAAK,CAACW,QAAN,CAAeK,aALC,EAMhBhB,KAAK,CAACW,QAAN,CAAeM,YANC,CAAlB;AAUA,eAAe,SAASC,iBAAT,CAA2BC,KAA3B,EAAkC;AAAA;;AAC/C,MAAIC,OAAO,GAAGf,SAAS,EAAvB,CAD+C,CAG/C;;AACA,MAAI,CAACgB,OAAD,EAAUC,UAAV,IAAwBrC,QAAQ,CAACsC,SAAD,CAApC;AACA,MAAI,CAACC,KAAD,EAAQC,QAAR,IAAoBxC,QAAQ,CAAC,EAAD,CAAhC;AACA,MAAI,CAACyC,QAAD,EAAWC,WAAX,IAA0B1C,QAAQ,CAAC,IAAI2C,IAAJ,EAAD,CAAtC;AACA,MAAI,CAACC,IAAD,EAAOC,OAAP,IAAkB7C,QAAQ,CAAC,EAAD,CAA9B;AACA,MAAI,CAAC8C,MAAD,EAASC,SAAT,IAAsB/C,QAAQ,CAAC,EAAD,CAAlC;AACA,MAAI,CAACgD,OAAD,EAAUC,UAAV,IAAwBjD,QAAQ,CAAC,EAAD,CAApC;AACA,MAAI,CAACkD,SAAD,EAAYC,YAAZ,IAA4BnD,QAAQ,CAAC,KAAD,CAAxC;AACA,MAAI;AAAEoD,IAAAA;AAAF,MAAkBlD,SAAS,EAA/B;AAGA,MAAImD,KAAK,GAAG,CAAC,IAAD,EAAM,IAAN,EAAW,IAAX,EAAgB,IAAhB,EAAqB,IAArB,EAA0B,IAA1B,EAA+B,IAA/B,EAAoC,IAApC,EAAyC,IAAzC,CAAZ;AACA,MAAIC,OAAO,GAAG,CAAC,IAAD,EAAM,IAAN,CAAd;AAGA,MAAIC,OAAO,GAAG,IAAIZ,IAAJ,EAAd;AACAY,EAAAA,OAAO,CAACC,OAAR,CAAgBD,OAAO,CAACE,OAAR,KAAoB,CAApC;AAEAxD,EAAAA,SAAS,CAAC,MAAM;AACd;AACA,UAAMyD,cAAc,GAAG;AACrBC,MAAAA,MAAM,EAAE,KADa;AAErBC,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB;AAFY,KAAvB;AAIAC,IAAAA,KAAK,CAAC,wCAAD,EAA2CH,cAA3C,CAAL,CACGI,IADH,CACQC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EADpB,EAEGF,IAFH,CAEQG,IAAI,IAAI;AACZ5B,MAAAA,UAAU,CAAC4B,IAAI,CAACC,GAAN,CAAV;;AACA,UAAGd,WAAH,EAAe;AACbe,QAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BhB,WAA7B;AACAZ,QAAAA,QAAQ,CAACY,WAAD,CAAR;AACD;AACF,KARH;AASD,GAfQ,EAeN,EAfM,CAAT;AAkBA,sBACE;AAAA,4BACE,QAAC,SAAD;AAAW,MAAA,KAAK,EAAC;AAAjB;AAAA;AAAA;AAAA;AAAA,YADF,eAEE,QAAC,IAAD;AAAM,MAAA,SAAS,MAAf;AAAgB,MAAA,OAAO,EAAE,CAAzB;AAAA,8BACE,QAAC,cAAD;AACE,QAAA,SAAS,EAAEjB,OAAO,CAACkC,eADrB;AAEE,QAAA,WAAW,eACT,QAAC,WAAD;AAAa,UAAA,SAAS,EAAElC,OAAO,CAACmC;AAAhC;AAAA;AAAA;AAAA;AAAA,gBAHJ;AAKE,QAAA,YAAY,EAAE,KALhB;AAME,QAAA,iBAAiB,EAAEnC,OAAO,CAACoC;AAN7B;AAAA;AAAA;AAAA;AAAA,cADF,eASE,QAAC,IAAD;AAAM,QAAA,IAAI,MAAV;AAAW,QAAA,EAAE,EAAE,EAAf;AAAA,+BACA,QAAC,MAAD;AAAQ,UAAA,iBAAiB,MAAzB;AAAA,iCACE,QAAC,IAAD;AAAM,YAAA,SAAS,MAAf;AAAgB,YAAA,IAAI,MAApB;AAAqB,YAAA,EAAE,EAAE,EAAzB;AAAA,mCACA;AAAK,cAAA,SAAS,EAAEpC,OAAO,CAACqC,aAAxB;AAAA,qCACE;AAAK,gBAAA,SAAS,EAAErC,OAAO,CAACsC,IAAxB;AAAA,wCACE;AAAA,yCACE,QAAC,SAAD;AACE,oBAAA,EAAE,EAAC,eADL;AAEE,oBAAA,KAAK,EAAC,cAFR;AAGE,oBAAA,KAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,aAArB,CAHT;AAIE,oBAAA,UAAU,EAAE;AACVC,sBAAAA,QAAQ,EAAE;AADA,qBAJd;AAOE,oBAAA,OAAO,EAAC;AAPV;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,wBADF,eAYE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAZF,eAaE;AAAA,yCACE,QAAC,GAAD;AAAK,oBAAA,EAAE,EAAE;AAAEC,sBAAAA,QAAQ,EAAE;AAAZ,qBAAT;AAAA,2CACE,QAAC,WAAD;AAAa,sBAAA,SAAS,MAAtB;AAAA,8CACE,QAAC,UAAD;AAAY,wBAAA,EAAE,EAAC,0BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BADF,eAEE,QAAC,MAAD;AACE,wBAAA,OAAO,EAAC,0BADV;AAEE,wBAAA,EAAE,EAAC,oBAFL;AAGE,wBAAA,KAAK,EAAEtC,KAHT;AAIE,wBAAA,KAAK,EAAC,OAJR;AAKE,wBAAA,QAAQ,EAAEuC,CAAC,IAAI;AAACtC,0BAAAA,QAAQ,CAACsC,CAAC,CAACC,MAAF,CAASC,KAAV,CAAR;AAAyB,yBAL3C;AAAA,kCAOG,CAAA5C,OAAO,SAAP,IAAAA,OAAO,WAAP,YAAAA,OAAO,CAAE6C,MAAT,IAAkB,CAAlB,GAAsB7C,OAAtB,aAAsBA,OAAtB,uBAAsBA,OAAO,CAAE8C,GAAT,CAAa,CAACF,KAAD,EAAOG,KAAP,KAAe;AACjD,8CAAO,QAAC,QAAD;AAAU,4BAAA,KAAK,EAAEH,KAAK,CAACI,EAAvB;AAAA,uCAA4BJ,KAAK,CAACK,MAAlC,SAA6CL,KAAK,CAACM,WAAnD;AAAA;AAAA;AAAA;AAAA;AAAA,kCAAP;AACD,yBAFsB,CAAtB,GAEI;AATP;AAAA;AAAA;AAAA;AAAA,8BAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,wBAbF,eA+BE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBA/BF,eAgCE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAhCF,eAiCE;AAAA,yCACE,QAAC,UAAD;AACE,oBAAA,KAAK,EAAE7C,QADT;AAEE,oBAAA,QAAQ,EAAG8C,IAAD,IAAU;AAAC7C,sBAAAA,WAAW,CAAC6C,IAAD,CAAX;AAAkB,qBAFzC;AAGE,oBAAA,OAAO,EAAEhC;AAHX;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,wBAjCF,eAyCE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAzCF,eA0CE;AAAA,yCACE,QAAC,GAAD;AAAK,oBAAA,EAAE,EAAE;AAAEsB,sBAAAA,QAAQ,EAAE;AAAZ,qBAAT;AAAA,4CACE,QAAC,WAAD;AAAA,8CACE,QAAC,UAAD;AAAY,wBAAA,EAAE,EAAC,0BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BADF,eAEE,QAAC,MAAD;AACE,wBAAA,OAAO,EAAC,0BADV;AAEE,wBAAA,EAAE,EAAC,oBAFL;AAGE,wBAAA,KAAK,EAAEjC,IAHT;AAIE,wBAAA,KAAK,EAAC,OAJR;AAKE,wBAAA,QAAQ,EAAEkC,CAAC,IAAI;AAACjC,0BAAAA,OAAO,CAACiC,CAAC,CAACC,MAAF,CAASC,KAAV,CAAP;AAAwB,yBAL1C;AAAA,kCAOG3B,KAAK,CAAC6B,GAAN,CAAU,CAACF,KAAD,EAAOG,KAAP,KAAe;AACxB,8CAAO,QAAC,QAAD;AAAU,4BAAA,KAAK,EAAEH,KAAjB;AAAA,sCAAyBA;AAAzB;AAAA;AAAA;AAAA;AAAA,kCAAP;AACD,yBAFA;AAPH;AAAA;AAAA;AAAA;AAAA,8BAFF;AAAA;AAAA;AAAA;AAAA;AAAA,4BADF,eAeE,QAAC,WAAD;AAAA,8CACE,QAAC,UAAD;AAAY,wBAAA,EAAE,EAAC,0BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BADF,eAEE,QAAC,MAAD;AACE,wBAAA,OAAO,EAAC,0BADV;AAEE,wBAAA,EAAE,EAAC,oBAFL;AAGE,wBAAA,KAAK,EAAElC,MAHT;AAIE,wBAAA,KAAK,EAAC,SAJR;AAKE,wBAAA,QAAQ,EAAEgC,CAAC,IAAI;AAAC/B,0BAAAA,SAAS,CAAC+B,CAAC,CAACC,MAAF,CAASC,KAAV,CAAT;AAA0B,yBAL5C;AAAA,kCAOG1B,OAAO,CAAC4B,GAAR,CAAY,CAACF,KAAD,EAAOG,KAAP,KAAe;AAC1B,8CAAO,QAAC,QAAD;AAAU,4BAAA,KAAK,EAAEH,KAAjB;AAAA,sCAAyBA;AAAzB;AAAA;AAAA;AAAA;AAAA,kCAAP;AACD,yBAFA;AAPH;AAAA;AAAA;AAAA;AAAA,8BAFF;AAAA;AAAA;AAAA;AAAA;AAAA,4BAfF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,wBA1CF,eA0EE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBA1EF,eA2EE;AAAA,yCACE,QAAC,SAAD;AACE,oBAAA,EAAE,EAAC,eADL;AAEE,oBAAA,KAAK,EAAC,cAFR;AAGE,oBAAA,KAAK,EAAEhC,OAHT;AAIE,oBAAA,QAAQ,EAAE8B,CAAC,IAAI;AAAC7B,sBAAAA,UAAU,CAAC6B,CAAC,CAACC,MAAF,CAASC,KAAV,CAAV;AAA2B,qBAJ7C;AAKE,oBAAA,SAAS,MALX;AAME,oBAAA,OAAO,EAAE;AANX;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,wBA3EF,eAqFE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBArFF,eAsFE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAtFF,eAuFE;AAAA,0CACE,QAAC,QAAD;AACE,oBAAA,SAAS,EAAE7C,OAAO,CAACqD,QADrB;AAEE,oBAAA,OAAO,EAAEtC,SAFX;AAGE,oBAAA,QAAQ,EAAE4B,CAAC,IAAI;AAAC3B,sBAAAA,YAAY,CAAC2B,CAAC,CAACC,MAAF,CAASU,OAAV,CAAZ;AAA+B;AAHjD;AAAA;AAAA;AAAA;AAAA,0BADF;AAAA;AAAA;AAAA;AAAA;AAAA,wBAvFF,eA+FE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBA/FF,eAgGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAhGF,eAiGE;AAAK,kBAAA,SAAS,EAAEtD,OAAO,CAACuD,WAAxB;AAAA,yCACE,QAAC,MAAD;AACE,oBAAA,OAAO,EAAE,MACPC,WAAW,EAFf;AAIE,oBAAA,OAAO,EAAC,WAJV;AAKE,oBAAA,KAAK,EAAC,SALR;AAME,oBAAA,IAAI,EAAC,OANP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,wBAjGF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,cATF;AAAA;AAAA;AAAA;AAAA;AAAA,YAFF;AAAA,kBADF;;AAsIA,WAASA,WAAT,GAAuB;AACrB,QAAIC,eAAe,GAAGnD,QAAQ,CAACoD,WAAT,KAAyB,GAAzB,IAAiCpD,QAAQ,CAACqD,QAAT,KAAoB,CAArB,GAAwB,EAAxB,GAA6B,GAA7B,GAAmC,EAAnE,KAA0ErD,QAAQ,CAACqD,QAAT,KAAoB,CAA9F,IAAmG,GAAnG,IAA0GrD,QAAQ,CAACgB,OAAT,KAAqB,EAArB,GAA0B,GAA1B,GAAgC,EAA1I,IAAgJhB,QAAQ,CAACgB,OAAT,EAAtK;AACA,QAAIsC,eAAe,GAAGnD,IAAI,GAAG,GAAP,GAAaE,MAAnC;;AACA,QAAG,CAACI,SAAJ,EAAc;AACZ8C,MAAAA,KAAK,CAAC,mBAAD,CAAL;AACA,aAAO,KAAP;AACD;;AACD,QAAGzD,KAAK,IAAIqD,eAAT,IAA4BG,eAA/B,EAA+C;AAC7C,YAAMrC,cAAc,GAAG;AACrBC,QAAAA,MAAM,EAAE,MADa;AAErBC,QAAAA,OAAO,EAAE;AAAE,0BAAgB;AAAlB,SAFY;AAGrBqC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBC,UAAAA,SAAS,EAAE1B,YAAY,CAACC,OAAb,CAAqB,IAArB,CADQ;AAEnBpC,UAAAA,KAAK,EAAEA,KAFY;AAGnBqD,UAAAA,eAAe,EAAEA,eAHE;AAInBG,UAAAA,eAAe,EAAEA,eAJE;AAKnB/C,UAAAA,OAAO,EAAEA;AALU,SAAf;AAHe,OAAvB;AAWAa,MAAAA,KAAK,CAAC,uCAAD,EAA0CH,cAA1C,CAAL,CACGI,IADH,CACQC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EADpB,EAEGF,IAFH,CAEQG,IAAI,IAAI;AACZ,YAAGA,IAAI,CAACoC,MAAL,KAAgB,GAAnB,EAAuB;AACrBC,UAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,oBAAvB;AACD;AACF,OANH;AAOD;AAGF;AAEF;;GA5MuBvE,iB;UACRb,S,EAUQlB,S;;;KAXA+B,iB;;AA8MxB,SAASwE,WAAT,OAAgD;AAAA,MAA3B;AAAEC,IAAAA,UAAF;AAAcC,IAAAA;AAAd,GAA2B;AAC9C,sBAAO,QAAC,SAAD;AAAW,IAAA,SAAS,EAAEA,SAAtB;AAAiC,IAAA,OAAO,EAAED;AAA1C;AAAA;AAAA;AAAA;AAAA,UAAP;AACD;;MAFQD,W","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { Grid, TextField, Select, MenuItem, Box, Button, FormControl, InputLabel, Checkbox} from \"@material-ui/core\";\nimport { Close as CloseIcon } from \"@material-ui/icons\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport SyntaxHighlighter from \"react-syntax-highlighter\";\nimport { docco } from \"react-syntax-highlighter/dist/esm/styles/hljs\";\nimport classnames from \"classnames\";\nimport DatePicker from \"react-date-picker\";\nimport \"react-datetime/css/react-datetime.css\";\n\n\n// styles\nimport \"react-toastify/dist/ReactToastify.css\";\nimport useStyles from \"./styles\";\n\n// components\nimport Widget from \"../../components/Widget/Widget\";\nimport PageTitle from \"../../components/PageTitle/PageTitle\";\nimport Notification from \"../../components/Notification\";\nimport { set } from \"date-fns\";\n\n\nconst positions = [\n  toast.POSITION.TOP_LEFT,\n  toast.POSITION.TOP_CENTER,\n  toast.POSITION.TOP_RIGHT,\n  toast.POSITION.BOTTOM_LEFT,\n  toast.POSITION.BOTTOM_CENTER,\n  toast.POSITION.BOTTOM_RIGHT,\n];\n\n\nexport default function NotificationsPage(props) {\n  var classes = useStyles();\n\n  // local\n  var [phyList, setPhyList] = useState(undefined);\n  var [phyId, setPhyId] = useState('');\n  var [bookDate, setBookDate] = useState(new Date());\n  var [hour, setHour] = useState('');\n  var [minute, setMinute] = useState('');\n  var [remarks, setRemarks] = useState('');\n  var [agreement ,setAgreement] = useState(false);\n  var { selectPhyId } = useParams();\n  \n\n  var hours = ['10','11','12','13','14','15','16','17','18']\n  var minutes = ['00','30']\n\n\n  var nextDay = new Date();\n  nextDay.setDate(nextDay.getDate() + 1);\n\n  useEffect(() => {\n    // get phy data\n    const requestOptions = {\n      method: 'GET',\n      headers: { 'Content-Type': 'application/json' },\n    };\n    fetch('http://localhost:3001/physiotherapists', requestOptions)\n      .then(response => response.json())\n      .then(data => {\n        setPhyList(data.res);\n        if(selectPhyId){\n          console.log(\"selectPhyId: \", selectPhyId);\n          setPhyId(selectPhyId);\n        }\n      });\n  }, []);\n  \n\n  return (\n    <>\n      <PageTitle title=\"預約診症\" />\n      <Grid container spacing={4}>\n        <ToastContainer\n          className={classes.toastsContainer}\n          closeButton={\n            <CloseButton className={classes.notificationCloseButton} />\n          }\n          closeOnClick={false}\n          progressClassName={classes.notificationProgress}\n        />\n        <Grid item xs={12}>\n        <Widget disableWidgetMenu>\n          <Grid container item xs={12}>\n          <div className={classes.formContainer}>\n            <div className={classes.form}>\n              <div>\n                <TextField\n                  id=\"outlined-name\"\n                  label=\"姓名\"\n                  value={localStorage.getItem('displayName')}\n                  InputProps={{\n                    readOnly: true,\n                  }}\n                  variant=\"filled\"\n                />\n              </div>\n              <div>&nbsp;</div>\n              <div>\n                <Box sx={{ minWidth: 120 }}>\n                  <FormControl fullWidth>\n                    <InputLabel id=\"demo-simple-select-label\">物理治療師</InputLabel>\n                    <Select\n                      labelId=\"demo-simple-select-label\"\n                      id=\"demo-simple-select\"\n                      value={phyId}\n                      label=\"PhyId\"\n                      onChange={e => {setPhyId(e.target.value)}}\n                    >\n                      {phyList?.length > 0 ? phyList?.map((value,index)=>{\n                        return <MenuItem value={value.id}>{value.center} - {value.displayName}</MenuItem>\n                      }) : ''}\n                    </Select>\n                  </FormControl>\n                </Box>\n              </div>\n              <div>&nbsp;</div>\n              <div>&nbsp;</div>\n              <div>\n                <DatePicker\n                  value={bookDate}\n                  onChange={(date) => {setBookDate(date)}}\n                  minDate={nextDay}\n                \n                />\n              </div>\n              <div>&nbsp;</div>\n              <div>\n                <Box sx={{ minWidth: 160 }}>\n                  <FormControl>\n                    <InputLabel id=\"demo-simple-select-label\">時</InputLabel>\n                    <Select\n                      labelId=\"demo-simple-select-label\"\n                      id=\"demo-simple-select\"\n                      value={hour}\n                      label=\"Hours\"\n                      onChange={e => {setHour(e.target.value)}}\n                    >\n                      {hours.map((value,index)=>{\n                        return <MenuItem value={value}>{value}</MenuItem>\n                      })}\n                    </Select>\n                  </FormControl>\n                  <FormControl>\n                    <InputLabel id=\"demo-simple-select-label\">分</InputLabel>\n                    <Select\n                      labelId=\"demo-simple-select-label\"\n                      id=\"demo-simple-select\"\n                      value={minute}\n                      label=\"Minutes\"\n                      onChange={e => {setMinute(e.target.value)}}\n                    >\n                      {minutes.map((value,index)=>{\n                        return <MenuItem value={value}>{value}</MenuItem>\n                      })}\n                    </Select>\n                  </FormControl>\n                </Box>\n              </div>\n              <div>&nbsp;</div>\n              <div>\n                <TextField\n                  id=\"outlined-name\"\n                  label=\"備註\"\n                  value={remarks}\n                  onChange={e => {setRemarks(e.target.value)}}\n                  multiline\n                  maxRows={4}\n                />\n              </div>\n              <div>&nbsp;</div>\n              <div>&nbsp;</div>\n              <div>\n                <Checkbox\n                  className={classes.checkbox}\n                  checked={agreement}\n                  onChange={e => {setAgreement(e.target.checked)}}\n                />\n                我同意相關機構取閱我的電子健康紀錄\n              </div>\n              <div>&nbsp;</div>\n              <div>&nbsp;</div>\n              <div className={classes.formButtons}>\n                <Button\n                  onClick={() =>\n                    confirmBook()\n                  }\n                  variant=\"contained\"\n                  color=\"primary\"\n                  size=\"large\"\n                >\n                  確定\n                </Button>\n              </div>\n            </div>\n          </div>\n          </Grid>\n          </Widget>\n        </Grid>\n      </Grid>\n    </>\n  );\n\n  function confirmBook() {\n    var appointmentDate = bookDate.getFullYear() + \"-\" + ((bookDate.getMonth()+1)<10 ? '0' : '') + (bookDate.getMonth()+1) + \"-\" + (bookDate.getDate() < 10 ? '0' : '') + bookDate.getDate();\n    var appointmentTime = hour + \":\" + minute;\n    if(!agreement){\n      alert('請同意相關機構取閱你的電子健康紀錄');\n      return false;\n    }\n    if(phyId && appointmentDate && appointmentTime){\n      const requestOptions = {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          patientId: localStorage.getItem('id'),\n          phyId: phyId,\n          appointmentDate: appointmentDate,\n          appointmentTime: appointmentTime,\n          remarks: remarks,\n         })\n      };\n      fetch('http://localhost:3001/makeAppointment', requestOptions)\n        .then(response => response.json())\n        .then(data => {\n          if(data.status === 200){\n            window.location.href = '/#/app/appointment';\n          }\n        });\n    }\n\n    \n  }\n\n}\n\nfunction CloseButton({ closeToast, className }) {\n  return <CloseIcon className={className} onClick={closeToast} />;\n}\n"]},"metadata":{},"sourceType":"module"}